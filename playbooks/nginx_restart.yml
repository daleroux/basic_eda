---
- name: Restart Nginx Service
  hosts: linux
  become: true
  gather_facts: false
  tasks:
    - name: Restart nginx
      ansible.builtin.systemd:
        name: nginx
        state: restarted

    - name: Verify nginx is running
      ansible.builtin.systemd:
        name: nginx
      register: nginx_status

    - name: Confirm nginx is active
      ansible.builtin.assert:
        that:
          - nginx_status.status.ActiveState == "active"
        fail_msg: "Nginx failed to restart"
        success_msg: "Nginx is running"
...

